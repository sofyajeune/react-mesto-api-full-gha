{"ast":null,"code":"import _classCallCheck from\"/Users/sofya/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/sofya/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this._handleResponse=function(res){if(res.ok){return res.json();}return Promise.reject('Ошибка');};this.link=options.link;this.headers=options.headers;}_createClass(Api,[{key:\"getUserInfo\",value:function getUserInfo(){return fetch(\"\".concat(this.link,\"/users/me\"),{method:\"GET\",headers:this.headers}).then(this._handleResponse);}},{key:\"getInitialCard\",value:function getInitialCard(){return fetch(\"\".concat(this.link,\"/cards\"),{method:\"GET\",headers:this.headers}).then(this._handleResponse);}},{key:\"setUserInfo\",value:function setUserInfo(name,about){return fetch(\"\".concat(this.link,\"/users/me\"),{method:'PATCH',headers:this.headers,body:JSON.stringify({name:\"\".concat(name),about:\"\".concat(about)})}).then(this._handleResponse);}},{key:\"addNewCard\",value:function addNewCard(name,link){return fetch(\"\".concat(this.link,\"/cards\"),{method:'POST',headers:this.headers,body:JSON.stringify({name:\"\".concat(name),link:\"\".concat(link)})}).then(this._handleResponse);}},{key:\"addNewAvatar\",value:function addNewAvatar(data){return fetch(\"\".concat(this.link,\"/users/me/avatar\"),{method:'PATCH',headers:this.headers,body:JSON.stringify({avatar:data.avatar})}).then(this._handleResponse);}},{key:\"removeCard\",value:function removeCard(id){return fetch(\"\".concat(this.link,\"/cards/\").concat(id),{method:'DELETE',headers:this.headers}).then(this._handleResponse);}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(id,like){var whichMethod=like?\"DELETE\":\"PUT\";return fetch(\"\".concat(this.link,\"/cards/\").concat(id,\"/likes\"),{method:whichMethod,headers:this.headers}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.status));}).catch(function(err){return console.log(err);});}}]);return Api;}();var options={link:'https://mesto.nomoreparties.co/v1/cohort-55/',headers:{authorization:'129cec41-0265-437c-8285-b8860fe417f8','Content-Type':'application/json'}};export var api=new Api(options);","map":{"version":3,"names":["Api","options","_handleResponse","res","ok","json","Promise","reject","link","headers","fetch","method","then","name","about","body","JSON","stringify","data","avatar","id","like","whichMethod","status","catch","err","console","log","authorization","api"],"sources":["/Users/sofya/dev/react-mesto-auth/src/utils/Api.js"],"sourcesContent":["class Api {\n  constructor(options) {\n    this.link = options.link;\n    this.headers = options.headers;\n  };\n\n  _handleResponse = (res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject('Ошибка')\n  };\n\n  getUserInfo() {\n    return fetch(`${this.link}/users/me`, {\n      method: \"GET\",\n      headers: this.headers\n    })\n      .then(this._handleResponse)\n  };\n\n\n  getInitialCard() {\n    return fetch(`${this.link}/cards`, {\n      method: \"GET\",\n      headers: this.headers\n    })\n      .then(this._handleResponse)\n  };\n\n  setUserInfo(name, about) {\n    return fetch(`${this.link}/users/me`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        name: `${name}`,\n        about: `${about}`\n      })\n    })\n      .then(this._handleResponse)\n  };\n\n  addNewCard(name, link) {\n    return fetch(`${this.link}/cards`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        name: `${name}`,\n        link: `${link}`\n      })\n    })\n      .then(this._handleResponse)\n  };\n\n  addNewAvatar(data) {\n    return fetch(`${this.link}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        avatar: data.avatar\n      })\n    })\n      .then(this._handleResponse)\n  };\n\n  removeCard(id) {\n    return fetch(`${this.link}/cards/${id}`, {\n      method: 'DELETE',\n      headers: this.headers,\n    })\n      .then(this._handleResponse)\n  };\n\n  changeLikeCardStatus(id, like) {\n    const whichMethod = like ? \"DELETE\" : \"PUT\";\n    return fetch(`${this.link}/cards/${id}/likes`, {\n      method: whichMethod,\n      headers: this.headers,\n    })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Error: ${res.status}`)\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nconst options = {\n  link: 'https://mesto.nomoreparties.co/v1/cohort-55/',\n  headers: {\n      authorization: '129cec41-0265-437c-8285-b8860fe417f8',\n      'Content-Type': 'application/json'\n  }\n}\n\nexport const api = new Api(options)"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}